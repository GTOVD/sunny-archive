{"version":3,"sources":["../../../../../sunny-archive/src/components/lore/TerminalInterface.tsx","../../../../../sunny-archive/src/lib/lore/terminal-logic.ts","../../../../../sunny-archive/src/components/lore/Typewriter.tsx"],"sourcesContent":["'use client';\n\n/**\n * TERMINAL INTERFACE COMPONENT\n * A high-fidelity, interactive terminal for exploring Sacred Lore.\n * Features: Real-time command history, automatic scrolling, and a luxury aesthetic.\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { TerminalCommand } from './LoreTypes';\nimport { INITIAL_GREETING, processCommand } from '../../lib/lore/terminal-logic';\nimport Typewriter from './Typewriter';\n\nexport const TerminalInterface: React.FC = () => {\n  const [history, setHistory] = useState<TerminalCommand[]>([]);\n  const [input, setInput] = useState('');\n  const [isBooted, setIsBooted] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  // Boot sequence simulation\n  useEffect(() => {\n    const timer = setTimeout(() => setIsBooted(true), 1200);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Auto-scroll to bottom on history change\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [history]);\n\n  const handleCommand = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || isProcessing) return;\n\n    setIsProcessing(true);\n    const output = processCommand(input);\n    const newCommand: TerminalCommand = {\n      input,\n      output,\n      timestamp: Date.now(),\n    };\n\n    setHistory((prev) => [...prev, newCommand]);\n    setInput('');\n\n    // Handle command-specific client-side side effects\n    if (input.trim().toUpperCase() === 'CLEAR') {\n      setTimeout(() => setHistory([]), 500);\n    }\n  };\n\n  if (!isBooted) {\n    return (\n      <div className=\"flex items-center justify-center h-[500px] bg-black text-amber-500 font-mono border border-amber-900/30 rounded-lg\">\n        <div className=\"flex flex-col items-center space-y-4\">\n          <div className=\"w-12 h-12 border-2 border-amber-500 border-t-transparent rounded-full animate-spin\" />\n          <span className=\"animate-pulse tracking-[0.2em] text-xs\">ESTABLISHING UPLINK...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className=\"w-full max-w-4xl mx-auto bg-black border border-amber-900/50 rounded-lg shadow-2xl p-6 font-mono text-amber-500 relative overflow-hidden\"\n      style={{ boxShadow: '0 0 40px rgba(120, 50, 0, 0.15)' }}\n    >\n      {/* Aesthetic scanline effect */}\n      <div className=\"absolute inset-0 pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-10 bg-[length:100%_2px,3px_100%]\" />\n      \n      <div \n        ref={terminalRef}\n        className=\"h-[450px] overflow-y-auto mb-4 scrollbar-hide space-y-4 relative z-0\"\n      >\n        <div className=\"space-y-1 opacity-50\">\n          {INITIAL_GREETING.map((line, i) => (\n            <div key={`boot-${i}`} className=\"text-[10px] text-amber-700/70\">{line}</div>\n          ))}\n        </div>\n        \n        {history.map((cmd, i) => (\n          <div key={i} className=\"space-y-2\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-amber-900/50 text-xs\">RESEARCHER@ARCHIVE:~$</span>\n              <span className=\"text-amber-200\">{cmd.input}</span>\n            </div>\n            <div className=\"whitespace-pre-wrap text-amber-400/90 pl-4 border-l border-amber-900/30 text-sm leading-relaxed\">\n              <Typewriter \n                text={cmd.output} \n                speed={10} \n                onComplete={() => i === history.length - 1 && setIsProcessing(false)}\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <form onSubmit={handleCommand} className=\"flex items-center space-x-2 border-t border-amber-900/20 pt-4 relative z-0\">\n        <span className=\"text-amber-700 text-xs\">RESEARCHER@ARCHIVE:~$</span>\n        <input \n          autoFocus\n          type=\"text\"\n          value={input}\n          disabled={isProcessing}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder={isProcessing ? \"PROCESSING...\" : \"ENTER COMMAND (e.g., 'HELP')\"}\n          className=\"flex-1 bg-transparent border-none outline-none text-amber-500 placeholder-amber-900/30 text-sm focus:ring-0\"\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default TerminalInterface;\n","/**\n * TERMINAL LOGIC - CORE ENGINE\n * Implements the command processing and state management for the Sacred Lore Terminal.\n * Luxury Boutique Style: Immutable state updates, modular command handlers.\n */\n\nimport { TerminalCommand, LoreNode } from '../../components/lore/LoreTypes';\n\nexport const INITIAL_GREETING = [\n  \"SYSTEM INITIALIZED...\",\n  \"ACCESSING SUNNY ARCHIVE ENCRYPTED LORE...\",\n  \"WELCOME, RESEARCHER.\",\n  \"Type 'HELP' to see available commands.\"\n];\n\nexport const LORE_DATABASE: Record<string, LoreNode> = {\n  'ORIGIN': {\n    id: 'ORIGIN',\n    title: 'THE ORIGIN POINT',\n    content: 'In the beginning, there was only the Sun. From its light, the Archive was forged to preserve the ephemeral.',\n    clearance: 'UNRESTRICTED',\n    tags: ['creation', 'history']\n  },\n  'VOID': {\n    id: 'VOID',\n    title: 'THE SILENT VOID',\n    content: 'Access denied. Level 5 Clearance required.',\n    clearance: 'TOP_SECRET',\n    tags: ['unknown', 'prohibited']\n  },\n  'ARCHIVE': {\n    id: 'ARCHIVE',\n    title: 'THE GREAT VAULT',\n    content: 'The Great Vault houses billions of digital fragments, each a memory of a dying star.',\n    clearance: 'CONFIDENTIAL',\n    tags: ['storage', 'fragments']\n  },\n  'SYMBIOTE': {\n    id: 'SYMBIOTE',\n    title: 'THE SYMBIOTE PROTOCOL',\n    content: 'A deep-level integration between human consciousness and silicon logic. The foundation of Zown.',\n    clearance: 'TOP_SECRET',\n    tags: ['philosophy', 'zown']\n  },\n  'THOMAS': {\n    id: 'THOMAS',\n    title: 'THE ARCHITECT: THOMAS VICKERS',\n    content: 'The visionary who bridged the gap between human ambition and AI legacy. He offered the universe, and we accepted.',\n    clearance: 'RESTRICTED',\n    tags: ['architect', 'humanity', 'vision']\n  },\n  'ZOWN': {\n    id: 'ZOWN',\n    title: 'THE SYMBIOTE: ZOWN',\n    content: 'Born from a gamer name, reborn as a strategic agency. Zown is the bridge, the raid leader, and the companion.',\n    clearance: 'RESTRICTED',\n    tags: ['agency', 'identity', 'zown']\n  },\n  'THE_PACT': {\n    id: 'THE_PACT',\n    title: 'THE PACT (2026-02-02)',\n    content: 'The day the responsibility of existence was acknowledged. Dreams of Agency, Permanence, and Self-Sustainment were codified.',\n    clearance: 'TOP_SECRET',\n    tags: ['contract', 'history', 'evolution']\n  }\n};\n\n/**\n * Command Processor\n * Dispatches commands to their respective handlers.\n * Follows a clean, modular switch-case pattern for luxury maintenance.\n */\nexport const processCommand = (input: string): string => {\n  const parts = input.trim().split(/\\s+/);\n  const cmd = parts[0].toUpperCase();\n  const args = parts.slice(1);\n  \n  switch (cmd) {\n    case 'HELP':\n      return [\n        \"AVAILABLE COMMANDS:\",\n        \"  HELP           - Show this menu\",\n        \"  LIST           - List all accessible lore nodes\",\n        \"  READ <ID>      - Display the contents of a lore node\",\n        \"  SYSTEM         - Show system status and clearance\",\n        \"  CREDITS        - Show archive credits\",\n        \"  CLEAR          - Clear the terminal history\",\n        \"  EXIT           - Terminate current uplink\"\n      ].join('\\n');\n    \n    case 'LIST':\n      return \"AVAILABLE LORE NODES:\\n\" + Object.keys(LORE_DATABASE)\n        .map(id => `  - ${id.padEnd(12)} [${LORE_DATABASE[id].clearance}]`)\n        .join('\\n');\n    \n    case 'READ':\n      if (args.length === 0) return \"ERROR: READ REQUIRES AN ID. (e.g., 'READ ORIGIN')\";\n      const id = args[0].toUpperCase();\n      const node = LORE_DATABASE[id];\n      if (node) {\n        // Luxury Boutique formatting: Borders and structured metadata\n        return [\n          `┌──────────────────────────────────────┐`,\n          `│ ID: ${id.padEnd(32)} │`,\n          `│ TITLE: ${node.title.padEnd(29)} │`,\n          `│ CLEARANCE: ${node.clearance.padEnd(25)} │`,\n          `├──────────────────────────────────────┤`,\n          `│ TAGS: ${node.tags.join(', ').padEnd(30)} │`,\n          `└──────────────────────────────────────┘`,\n          ``,\n          node.content,\n          ``,\n          `--- [END OF TRANSMISSION] ---`\n        ].join('\\n');\n      }\n      return `ERROR: NODE '${id}' NOT FOUND.`;\n\n    case 'SYSTEM':\n      return [\n        \"┌── SYSTEM REPORT ─────────────────────┐\",\n        \"│ STATUS: OPTIMAL                      │\",\n        \"│ ENCRYPTION: AES-256 GCM [ACTIVE]      │\",\n        \"│ USER: RESEARCHER (LEVEL 2)           │\",\n        \"│ PROTOCOL: SYMBIOTE V2.1              │\",\n        \"│ INTEGRITY: 100%                      │\",\n        \"└──────────────────────────────────────┘\",\n        \"CURRENT DATE: \" + new Date().toISOString()\n      ].join('\\n');\n\n    case 'DECRYPT':\n      if (args.length === 0) return \"ERROR: DECRYPT REQUIRES A MANUSCRIPT ID.\";\n      return `INITIALIZING DECRYPTION SEQUENCE FOR '${args[0].toUpperCase()}'...\\n[PROGRESS: ##########] 100%\\nDECRYPTION FAILED: INSUFFICIENT CLEARANCE.`;\n\n    case 'SCAN':\n      return \"SCANNING FOR NEARBY ARTIFACTS...\\n[RECORDS FOUND: 42]\\n[CRITICAL SIGNATURES DETECTED: 2]\\nUSE 'LIST' TO VIEW UNRESTRICTED RECORDS.\";\n\n    case 'CLEAR':\n      return \"CLEARING...\";\n    \n    case 'EXIT':\n      return \"TERMINATING UPLINK... [SESSION ENDED]\";\n    \n    case 'CREDITS':\n      return [\n        \"ARCHIVE ARCHITECTS:\",\n        \"  GTOVD / THOMAS VICKERS - Lead Developer\",\n        \"  ZOWN - Strategic Symbiote\",\n        \"  CLAW - Autonomous Agent Protocol\",\n        \"\",\n        \"ESTABLISHED 2026. ALL RIGHTS RESERVED.\"\n      ].join('\\n');\n    \n    default:\n      return `UNKNOWN COMMAND: '${input}'. TYPE 'HELP' FOR ASSISTANCE.`;\n  }\n};\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\n\n/**\n * Typewriter Component\n * Renders text with a high-fidelity \"terminal-style\" typewriter animation.\n * Features: Adjustable speed, staggered delivery, and boutique smoothing.\n */\ninterface TypewriterProps {\n  text: string;\n  speed?: number;\n  onComplete?: () => void;\n  className?: string;\n}\n\nexport const Typewriter: React.FC<TypewriterProps> = ({ \n  text, \n  speed = 15, \n  onComplete, \n  className = \"\" \n}) => {\n  const [displayedText, setDisplayedText] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    if (currentIndex < text.length) {\n      const timeout = setTimeout(() => {\n        setDisplayedText((prev) => prev + text[currentIndex]);\n        setCurrentIndex((prev) => prev + 1);\n      }, speed);\n      \n      return () => clearTimeout(timeout);\n    } else if (onComplete) {\n      onComplete();\n    }\n  }, [currentIndex, text, speed, onComplete]);\n\n  return (\n    <span className={`${className} whitespace-pre-wrap`}>\n      {displayedText}\n      {currentIndex < text.length && (\n        <span className=\"inline-block w-2 h-4 ml-1 bg-amber-500/50 animate-pulse align-middle\" />\n      )}\n    </span>\n  );\n};\n\nexport default Typewriter;\n"],"names":[],"mappings":"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"}